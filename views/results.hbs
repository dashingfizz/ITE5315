{{> header}}

<div class="container">
    <!-- Search Header -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="main-container">
                <div class="card custom-card">
                    <div class="card-header card-header-custom">
                        <h2 class="mb-0">Restaurant Search Results</h2>
                    </div>
                    <div class="card-body">
                        {{#if success}}
                            <div class="alert alert-success alert-custom">
                                <strong>üéâ Success!</strong> {{success}}
                            </div>
                        {{/if}}
                        {{#if error}}
                            <div class="alert alert-danger alert-custom">
                                <strong>‚ö†Ô∏è Error:</strong> {{error}}
                            </div>
                        {{/if}}
                        {{#if message}}
                            <div class="alert alert-info alert-custom">
                                <strong>‚ÑπÔ∏è Info:</strong> {{message}}
                            </div>
                        {{/if}}
                        
                        <div class="search-summary">
                            {{#if league}}<strong>League:</strong> {{league}} |{{/if}}
                            {{#if team}}<strong>Team:</strong> {{team}} |{{/if}}
                            {{#if stadium}}<strong>Stadium:</strong> {{stadium}}{{/if}}
                            {{#if city}} | <strong>Location:</strong> {{city}}, {{state}}{{/if}}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Results Count -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="d-flex justify-content-between align-items-center">
                <h2 class="results-count">
                    Found {{searchCount}} Restaurant{{#if (gt searchCount 1)}}s{{/if}}
                </h2>
                <a href="/" class="btn btn-outline-custom">
                    üîç New Search
                </a>
            </div>
        </div>
    </div>

    <!-- Restaurant Cards -->
    <div class="row">
        {{#each restaurants}}
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card restaurant-card h-100">
                {{#if image_url}}
                <img src="{{image_url}}" class="card-img-top" alt="{{name}}" style="height: 200px; object-fit: cover;">
                {{else}}
                <div class="card-img-top bg-light d-flex align-items-center justify-content-center" style="height: 200px;">
                    <span class="text-muted">No Image Available</span>
                </div>
                {{/if}}
                
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title">{{name}}</h5>
                    
                    <!-- Rating and Price -->
                    <div class="mb-2">
                        <span class="badge badge-rating me-1">
                            ‚≠ê {{rating}} ({{review_count}} reviews)
                        </span>
                        {{#if price}}
                        <span class="badge badge-custom">{{price}}</span>
                        {{/if}}
                    </div>
                    
                    <!-- Categories -->
                    <div class="mb-2">
                        {{#each categories}}
                        <span class="badge bg-secondary me-1 mb-1">{{title}}</span>
                        {{/each}}
                    </div>
                    
                    <!-- Address -->
                    {{#if location.display_address}}
                    <p class="card-text small text-muted mb-2">
                        üìç {{#each location.display_address}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
                    </p>
                    {{/if}}
                    
                    <!-- Phone -->
                    {{#if display_phone}}
                    <p class="card-text small mb-2">
                        üìû {{display_phone}}
                    </p>
                    {{/if}}
                    
                    <!-- Distance -->
                    {{#if distance}}
                    <p class="card-text small mb-3">
                        üö∂‚Äç‚ôÇÔ∏è {{convertDistance distance}} from stadium
                    </p>
                    {{/if}}
                    
                    <!-- Transactions -->
                    {{#if transactions}}
                    <div class="mt-auto mb-3">
                        <small class="text-muted">
                            <strong>Services:</strong> {{#each transactions}}{{this}}{{#unless @last}}, {{/unless}}{{/each}}
                        </small>
                    </div>
                    {{/if}}
                    
                    <!-- Actions -->
                    <div class="mt-auto">
                        {{#if url}}
                        <a href="{{url}}" target="_blank" class="btn btn-custom btn-sm w-100">
                            View on Yelp
                        </a>
                        {{/if}}
                    </div>
                </div>
            </div>
        </div>
        {{else}}
        <div class="col-12">
            <div class="card custom-card">
                <div class="card-body text-center py-5">
                    <div style="font-size: 4rem; margin-bottom: 1rem;">üçΩÔ∏è</div>
                    <h4>No restaurants found</h4>
                    <p class="text-muted mb-4">Try adjusting your search criteria or check back later for updates.</p>
                    <a href="/" class="btn btn-custom">New Search</a>
                </div>
            </div>
        </div>
        {{/each}}
    </div>

    <!-- Back to Search -->
    {{#if restaurants.length}}
    <div class="row mt-4">
        <div class="col-12 text-center">
            <a href="/" class="btn btn-outline-custom btn-lg">
                üîç Perform New Search
            </a>
        </div>
    </div>
    {{/if}}
</div>

{{> footer}}